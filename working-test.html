<!DOCTYPE html>
<html>
<head>
    <title>Working LAMS Test</title>
    <style>
        body { font-family: Arial, sans-serif; padding: 20px; }
        .btn { padding: 10px 20px; margin: 5px; background: #007cba; color: white; border: none; border-radius: 4px; cursor: pointer; }
        .success { color: green; }
        .error { color: red; }
    </style>
</head>
<body>
    <h1>Working LAMS Assignment Test</h1>
    
    <div>
        <h3>1. Add Master Data</h3>
        <button class="btn" onclick="addSampleData()">Add Sample Data</button>
        <div id="dataStatus"></div>
    </div>
    
    <div>
        <h3>2. Create Assignment</h3>
        <button class="btn" onclick="createTestAssignment()">Create Test Assignment</button>
        <div id="assignmentStatus"></div>
    </div>
    
    <div>
        <h3>3. View Results</h3>
        <div id="results"></div>
    </div>

    <script>
        // Simple working data manager
        class WorkingDataManager {
            constructor() {
                this.data = {
                    assignments: [],
                    timeSlots: [],
                    departments: [],
                    semesters: [],
                    groups: [],
                    subGroups: [],
                    subjects: [],
                    labRooms: [],
                    theoryFaculty: [],
                    labFaculty: []
                };
            }
            
            addAssignment(assignment) {
                // Simple validation
                const required = ['day', 'timeSlot', 'department', 'semester', 'group', 'subGroup', 'subject', 'labRoom', 'theoryFaculty', 'labFaculty'];
                const missing = required.filter(field => !assignment[field]);
                
                if (missing.length > 0) {
                    alert('Missing: ' + missing.join(', '));
                    return false;
                }
                
                this.data.assignments.push(assignment);
                return true;
            }
            
            refreshAllComponents() {
                // Update display
                document.getElementById('results').innerHTML = 
                    '<h4>Current Assignments:</h4>' + 
                    this.data.assignments.map(a => 
                        `<div>${a.department}-${a.group}-${a.subject} on ${a.day} at ${a.timeSlot}</div>`
                    ).join('');
            }
        }

        // Initialize
        window.dataManager = new WorkingDataManager();
        
        function addSampleData() {
            const dm = window.dataManager;
            dm.data.timeSlots = ['9:00-10:00', '10:00-11:00'];
            dm.data.departments = ['CSE', 'ECE'];
            dm.data.semesters = ['1st', '2nd'];
            dm.data.groups = ['A', 'B'];
            dm.data.subGroups = ['1', '2'];
            dm.data.subjects = ['Computer Lab', 'Programming Lab'];
            dm.data.labRooms = ['Lab1', 'Lab2'];
            dm.data.theoryFaculty = ['Dr.Smith', 'Dr.Brown'];
            dm.data.labFaculty = ['Prof.Johnson', 'Prof.Davis'];
            
            document.getElementById('dataStatus').innerHTML = '<span class="success">✓ Sample data added</span>';
        }
        
        function createTestAssignment() {
            const assignment = {
                day: 'Monday',
                timeSlot: '9:00-10:00',
                department: 'CSE',
                semester: '1st',
                group: 'A',
                subGroup: '1',
                subject: 'Computer Lab',
                labRoom: 'Lab1',
                theoryFaculty: 'Dr.Smith',
                labFaculty: 'Prof.Johnson'
            };
            
            const success = window.dataManager.addAssignment(assignment);
            
            if (success) {
                document.getElementById('assignmentStatus').innerHTML = '<span class="success">✓ Assignment created successfully!</span>';
                window.dataManager.refreshAllComponents();
            } else {
                document.getElementById('assignmentStatus').innerHTML = '<span class="error">✗ Assignment creation failed</span>';
            }
        }
    </script>
</body>
</html>