<!DOCTYPE html>
<html>
<head>
    <title>LAMS Sync Status Test</title>
    <style>
        body { font-family: Arial, sans-serif; padding: 20px; background: #f5f5f5; }
        .test-card { background: white; padding: 20px; margin: 10px 0; border-radius: 8px; box-shadow: 0 2px 4px rgba(0,0,0,0.1); }
        .status { padding: 10px; border-radius: 4px; margin: 10px 0; }
        .success { background: #d4edda; color: #155724; border: 1px solid #c3e6cb; }
        .error { background: #f8d7da; color: #721c24; border: 1px solid #f5c6cb; }
        .warning { background: #fff3cd; color: #856404; border: 1px solid #ffeaa7; }
        .btn { background: #007bff; color: white; padding: 10px 20px; border: none; border-radius: 4px; cursor: pointer; margin: 5px; }
        .btn:hover { background: #0056b3; }
    </style>
</head>
<body>
    <h1>üîÑ LAMS Data Sync Status Test</h1>
    
    <div class="test-card">
        <h3>üì± Current Sync Configuration</h3>
        <div id="syncConfig"></div>
    </div>
    
    <div class="test-card">
        <h3>üíæ Data Storage Test</h3>
        <button class="btn" onclick="testDataStorage()">Test Create Data</button>
        <button class="btn" onclick="checkDataSync()">Check Sync Status</button>
        <div id="storageResults"></div>
    </div>
    
    <div class="test-card">
        <h3>üåê Cross-Device Instructions</h3>
        <div class="status warning">
            <strong>To test cross-device sync:</strong><br>
            1. Open this same URL on another device<br>
            2. Sign in with the same Google account<br>
            3. Create an assignment on one device<br>
            4. Check if it appears on the other device
        </div>
    </div>

    <script src="config.js"></script>
    <script>
        function displaySyncConfig() {
            const config = window.CONFIG || {};
            const googleDriveEnabled = config.FEATURES?.GOOGLE_DRIVE_SYNC;
            const realtimeEnabled = config.FEATURES?.REALTIME_SYNC;
            
            document.getElementById('syncConfig').innerHTML = `
                <div class="status ${googleDriveEnabled ? 'success' : 'error'}">
                    <strong>Google Drive Sync:</strong> ${googleDriveEnabled ? '‚úÖ ENABLED' : '‚ùå DISABLED'}
                    <br><small>${googleDriveEnabled ? 'Data will sync across devices' : 'Data stays on local device only'}</small>
                </div>
                <div class="status ${realtimeEnabled ? 'success' : 'error'}">
                    <strong>Real-time Sync:</strong> ${realtimeEnabled ? '‚úÖ ENABLED' : '‚ùå DISABLED'}
                    <br><small>${realtimeEnabled ? 'Changes sync between browser tabs' : 'No real-time updates'}</small>
                </div>
            `;
        }
        
        function testDataStorage() {
            const testData = {
                test: true,
                timestamp: Date.now(),
                message: 'Test data created on ' + new Date().toLocaleString()
            };
            
            localStorage.setItem('lams-sync-test', JSON.stringify(testData));
            
            document.getElementById('storageResults').innerHTML = `
                <div class="status success">
                    ‚úÖ Test data created locally at ${new Date().toLocaleTimeString()}
                </div>
                <div class="status warning">
                    üìã Open another tab and run this test to see if data syncs between tabs
                </div>
            `;
        }
        
        function checkDataSync() {
            const testData = localStorage.getItem('lams-sync-test');
            if (testData) {
                const parsed = JSON.parse(testData);
                document.getElementById('storageResults').innerHTML = `
                    <div class="status success">
                        ‚úÖ Found test data: ${parsed.message}
                    </div>
                `;
            } else {
                document.getElementById('storageResults').innerHTML = `
                    <div class="status error">
                        ‚ùå No test data found. Create test data first.
                    </div>
                `;
            }
        }
        
        // Initialize
        displaySyncConfig();
    </script>
</body>
</html>